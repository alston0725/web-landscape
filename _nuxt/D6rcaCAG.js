import{f as g,q as w,au as x,r as o,c as S,a as t,z as k,A as N,y as A,F as z,o as B,av as C}from"./g1nWQSka.js";const D=["value"],_=g({__name:"AccountDetail",setup(F){var c,m;const{user:s}=w(),{auth:n}=x(),l=o(((c=s.value)==null?void 0:c.displayName)||""),d=o(((m=s.value)==null?void 0:m.email)||""),u=o(!1);let i=0;const p=/^[a-zA-Z0-9\u4e00-\u9fa5 ]{1,10}$/,v=a=>{const e=Date.now(),r=JSON.parse(localStorage.getItem(a)||"[]").filter(y=>e-y<30*60*1e3);return r.length>=3?!1:(r.push(e),localStorage.setItem(a,JSON.stringify(r)),!0)},b=async()=>{var a;if(!v("account_save_btn")){i<3&&(alert("30分鐘內只能最多只可修改3次"),i++);return}if(!p.test(l.value)){alert("暱稱只能包含英文,中文,數字,且最多10個字");return}if(!n||!n.currentUser){alert("尚未登入，請重新登入後再試");return}u.value=!0;try{l.value!==((a=s.value)==null?void 0:a.displayName)&&await C(n.currentUser,{displayName:l.value}),alert("資料已成功更新！")}catch(e){alert("更新失敗："+((e==null?void 0:e.message)||e))}finally{u.value=!1}};return(a,e)=>(B(),S(z,null,[e[4]||(e[4]=t("h3",{class:"text-lg font-semibold mb-2"},"帳戶詳細資料",-1)),t("form",{onSubmit:A(b,["prevent"]),class:"space-y-4"},[t("div",null,[e[1]||(e[1]=t("label",{class:"block font-medium mb-1"},"暱稱 :",-1)),k(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=f=>l.value=f),class:"border p-2 rounded w-1/4 bg-gray-100 resize-none",rows:"1"},null,512),[[N,l.value]])]),t("div",null,[e[2]||(e[2]=t("label",{class:"block font-medium mb-1"},"電子郵件地址 :",-1)),t("input",{type:"email",value:d.value,readonly:"",class:"focus:outline-none"},null,8,D)]),e[3]||(e[3]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded cursor-pointer"},"儲存設定",-1))],32)],64))}});export{_};
