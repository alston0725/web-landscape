import{f as c,q as p,h as d,c as f,a as r,y as g,F as b,o as v}from"./g1nWQSka.js";const w=["value","placeholder"],S=c({__name:"ResetPassword",setup(y){const{resetPassword:l,user:n}=p(),s=d(()=>{var e;return((e=n.value)==null?void 0:e.email)||""}),u=e=>{const t=Date.now(),a=JSON.parse(localStorage.getItem(e)||"[]").filter(m=>t-m<30*60*1e3);return a.length>=3?!1:(a.push(t),localStorage.setItem(e,JSON.stringify(a)),!0)};let o=0;const i=async()=>{if(!u("reset_save_btn")){o<3&&(alert("30分鐘內只能最多只可修改3次"),o++);return}if(s.value)try{await l(s.value),alert("重設密碼信已寄出，請檢查您的信箱（可能在垃圾郵件匣）")}catch(e){alert("重設失敗："+(e.message||e))}};return(e,t)=>(v(),f(b,null,[t[2]||(t[2]=r("h3",{class:"text-lg font-semibold mb-2"},"忘記密碼",-1)),r("form",{onSubmit:g(i,["prevent"])},[r("input",{value:s.value,type:"email",placeholder:s.value,class:"border p-2 rounded mr-2 my-1 w-3/5 bg-gray-100",readonly:"",required:""},null,8,w),t[0]||(t[0]=r("br",null,null,-1)),t[1]||(t[1]=r("button",{type:"submit",class:"bg-yellow-500 text-white px-4 py-2 mt-2 rounded cursor-pointer"},"確認",-1))],32)],64))}});export{S as _};
